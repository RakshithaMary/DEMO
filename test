let clickedElementsData = []; // stores properties of clicked nodes/edges

function appendToStaticTable(element, props) {
    const tbody = document.querySelector('#data-table tbody');
    if (!tbody) return;

    const isNode = element.isNode();
    const type = element.data('label') || (isNode ? 'Node' : 'Edge');
    const name = props[currentQuery.caption_property] || props.name || 'N/A';

    const row = document.createElement('tr');
    row.innerHTML = `
        <td>${type}</td>
        <td>${name}</td>
        <td>${JSON.stringify(props)}</td>
    `;
    tbody.appendChild(row);

    // store data for export
    clickedElementsData.push({
        type,
        name,
        ...props
    });
}


-----------


function downloadTableAsCSV() {
    if (clickedElementsData.length === 0) {
        alert("No data to download yet.");
        return;
    }

    const headers = Object.keys(clickedElementsData[0]);
    const csvRows = [headers.join(",")];

    clickedElementsData.forEach(row => {
        const values = headers.map(header => {
            let val = row[header];
            if (typeof val === 'object') val = JSON.stringify(val).replace(/,/g, ';');
            if (val === null || val === undefined) val = '';
            return `"${val}"`;
        });
        csvRows.push(values.join(","));
    });

    const csvData = csvRows.join("\n");
    const blob = new Blob([csvData], { type: "text/csv" });
    const url = window.URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = "graph_elements_data.csv";
    a.click();
    window.URL.revokeObjectURL(url);
}
----------------


document.getElementById('download-table-btn').addEventListener('click', downloadTableAsCSV);


-------------

<div class="data-table-container">
    <div id="data-table-summary" class="data-table-summary">
        <div id="breadcrumb-trail" class="breadcrumb-container"></div>
        <div id="summary-totals" class="summary-totals"></div>
    </div>

    <!-- ✅ Add this new section here -->
    <div class="download-controls">
        <button id="download-table-btn" class="btn">
            <i class="fa fa-download"></i> Download Table
        </button>
    </div>
    <!-- ✅ End of new section -->

    <div class="table-wrapper">
        <table id="data-table">
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Properties</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>


--------

.download-controls {
    text-align: right;
    margin: 10px 0;
}

.download-controls .btn {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}

.download-controls .btn:hover {
    background-color: #0056b3;
}

-----

document.getElementById('download-table-btn')
        .addEventListener('click', downloadTableAsCSV);


